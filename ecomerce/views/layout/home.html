<h1>Accueil</h1>

<div class="box_produits"></div>

<div class="test" style="background-color: green;color: white;"></div>


<script type="text/javascript">
    title = "HC-DEV | Accueil";
    $("title").html(title);

$(function(){
        //SIBLES
        let search = $("#search");
        let search_input = $("#search input");
        let test = $(".test");
        let box_produits = $(".box_produits");
        let produit = $(".produit");
    
        //VARIABLES INIT
        let tampon = "";
        let item_produit = "";
        let elem_produit = "";
        let id_produit = "";

        

        search.change(function(id){
            elem_produit = " ";
            box_produits.html(elem_produit);
            let value = `${id.target.value}`.replace("\b ", "")
            fetch("./assets/js/datas/dataProduits.json")
                .then(res => res.json())
                .then(data => {
                    data.forEach(elem => {
                        //console.log("NOM --- "+elem.Name)
                        elem.Keywords.forEach(key => {
                            //console.log(key)
                            if( value == key ){
                                //box_produits.html('<div class="produit"><p>IF</p></div>');
                                //console.log("--- IF");
                                idvalue(elem.Name);
                            }else{
                                //box_produits.html('<div class="produit"><p>ELSE</p></div>');
                                //console.log("ELSE ----");
                            }
                        })
                        
                    })
                })
            search_input.attr("value", "test hugo")
        }) 



        function idvalue(id_value){
            $.ajax({
                async: true,
                url: "./assets/js/datas/dataProduits.json",
                dataType: "json",
                success: function(data){
                    data.forEach(elem => {
                        //console.log(elem);
                        if( id_value == elem.Name ){
                            if( tampon === elem.Name){
                                false
                            }else{
                                tampon = elem.Name
                                elem_produit += '<div class="produit">';
                                elem_produit += '<img src="'+elem.Image+'" alt="">';
                                elem_produit += '<h3>'+elem.Name+'</h3>';
                                elem_produit += '<p>prix: '+elem.Prix+'</p>';
                                elem_produit += '<a href="">Panier</a>';
                                elem_produit += '</div>';
                                box_produits.html(elem_produit);
                            }
                        }else{
                            // faire un calcul entre true et false pour messaje d'error
                        }
                    })
                }
            });
        }
})







    



        /*
search.change(function(id){
        id_produit = `${id.target.value}`;
    })

        fetch("./assets/js/datas/dataProduits.json")
            .then(res => res.json())
            .then(data => {
                data.forEach(elem => {
                    elem.Keywords.forEach(key => {
                        if( id_produit == key ){
                            tampon = elem.Name
                            elem_produit += '<div class="produit">';
                            elem_produit += '<img src="'+elem.Image+'" alt="">';
                            elem_produit += '<h3>'+elem.Name+'</h3>';
                            elem_produit += '<p>prix: '+elem.Prix+'</p>';
                            elem_produit += '<a href="">Panier</a>';
                            elem_produit += '</div>';
                        }else{
                            if( tampon != "" ){    
                                false
                            }else{  
                                elem_produit = "Rien";
                            }
                        }
                    })
                    box_produits.html(elem_produit);
                })
                tampon = "";
            })
            */





    /*if( id_produit == key ){
                            tampon = elem.Name
                            elem_produit += '<div class="produit">';
                            elem_produit += '<img src="'+elem.Image+'" alt="">';
                            elem_produit += '<h3>'+elem.Name+'</h3>';
                            elem_produit += '<p>prix: '+elem.Prix+'</p>';
                            elem_produit += '<a href="">Panier</a>';
                            elem_produit += '</div>';
                        }else{
                            if( tampon != "" ){    
                                false
                            }else{  
                                elem_produit = "Rien";
                            }
                        }*/
</script>